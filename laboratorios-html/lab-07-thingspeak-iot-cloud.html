<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorio: IoT Cloud - ThingSpeak</title>
    <style>
        /* ============================================
           DESIGN SYSTEM - Spacing Scale (8px base)
           ============================================ */
        :root {
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;

            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --text-3xl: 1.875rem;
            --text-4xl: 2.25rem;

            --color-primary: #1e40af;
            --color-primary-light: #3b82f6;
            --color-secondary: #0f172a;
            --color-accent: #f59e0b;

            --text-primary: #0f172a;
            --text-secondary: #334155;
            --text-muted: #64748b;
            --text-inverse: #ffffff;

            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;

            --border-light: #e2e8f0;
            --border-medium: #cbd5e1;

            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1);

            --radius-sm: 0.25rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.5;
            color: var(--text-primary);
            background: var(--bg-tertiary);
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            background: var(--bg-primary);
            box-shadow: var(--shadow-xl);
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
            color: var(--text-inverse);
            padding: var(--space-8) var(--space-6);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 400px;
            height: 400px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            pointer-events: none;
        }

        header h1 {
            font-size: var(--text-4xl);
            font-weight: 700;
            margin-bottom: var(--space-2);
            position: relative;
            z-index: 1;
        }

        header .subtitle {
            font-size: var(--text-lg);
            opacity: 0.95;
            font-weight: 400;
        }

        header .meta {
            margin-top: var(--space-4);
            font-size: var(--text-sm);
            opacity: 0.85;
            display: inline-flex;
            align-items: center;
            gap: var(--space-3);
            flex-wrap: wrap;
            justify-content: center;
        }

        header .meta span {
            padding: var(--space-1) var(--space-3);
            background: rgba(255,255,255,0.15);
            border-radius: var(--radius-lg);
        }

        /* Navigation */
        nav {
            background: var(--color-secondary);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-md);
        }

        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            padding: 0 var(--space-4);
            max-width: 100%;
            overflow-x: auto;
        }

        nav li {
            margin: 0;
        }

        nav a {
            display: block;
            padding: var(--space-3) var(--space-4);
            color: rgba(255,255,255,0.85);
            text-decoration: none;
            transition: all 0.2s ease;
            font-size: var(--text-sm);
            font-weight: 500;
            white-space: nowrap;
            border-bottom: 2px solid transparent;
        }

        nav a:hover {
            background: rgba(255,255,255,0.1);
            color: var(--text-inverse);
        }

        .progress-bar {
            height: 3px;
            background: rgba(255,255,255,0.2);
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-accent), #fbbf24);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Main Content */
        main {
            padding: var(--space-8);
            max-width: 1024px;
            margin: 0 auto;
        }

        section {
            margin-bottom: var(--space-12);
            scroll-margin-top: 80px;
        }

        /* Typography */
        section h2 {
            color: var(--color-primary);
            border-bottom: 3px solid var(--color-primary-light);
            padding-bottom: var(--space-2);
            margin-bottom: var(--space-6);
            font-size: var(--text-3xl);
            font-weight: 700;
        }

        section h3 {
            color: var(--color-primary);
            margin: var(--space-6) 0 var(--space-4);
            font-size: var(--text-2xl);
            font-weight: 600;
        }

        section h4 {
            color: var(--text-secondary);
            margin: var(--space-4) 0 var(--space-2);
            font-size: var(--text-lg);
            font-weight: 600;
        }

        p {
            margin-bottom: var(--space-4);
            line-height: 1.625;
            max-width: 75ch;
        }

        /* Callout Boxes */
        .info-box {
            padding: var(--space-5);
            border-radius: var(--radius-lg);
            margin: var(--space-5) 0;
            border-left: 4px solid;
        }

        .info-box.success { background: #f0fdf4; border-color: #10b981; }
        .info-box.warning { background: #fef3c7; border-color: #f59e0b; }
        .info-box.info { background: #dbeafe; border-color: #3b82f6; }
        .info-box.danger { background: #fef2f2; border-color: #ef4444; }

        .alert-box {
            background: #fee2e2;
            border-left: 4px solid #ef4444;
            padding: var(--space-5);
            margin: var(--space-5) 0;
            border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
            box-shadow: var(--shadow-sm);
        }

        .intro-box {
            background: #eff6ff;
            border-left: 4px solid var(--color-primary-light);
            padding: var(--space-5);
            margin: var(--space-6) 0;
            border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
            box-shadow: var(--shadow-sm);
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--space-6) 0;
            font-size: var(--text-sm);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        th {
            background: var(--color-primary);
            color: var(--text-inverse);
            padding: var(--space-3) var(--space-4);
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.025em;
            font-size: var(--text-xs);
        }

        td {
            padding: var(--space-3) var(--space-4);
            border-bottom: 1px solid var(--border-light);
        }

        tbody tr:nth-child(even) {
            background: var(--bg-secondary);
        }

        tbody tr:hover {
            background: #e0e7ff;
            transition: background 0.15s ease;
        }

        /* Code */
        pre {
            background: var(--color-secondary);
            color: #e2e8f0;
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            overflow-x: auto;
            margin: var(--space-4) 0;
            font-size: var(--text-sm);
            line-height: 1.625;
            box-shadow: var(--shadow-md);
        }

        code {
            background: var(--bg-tertiary);
            color: var(--color-primary);
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-md);
            font-size: 0.9em;
            font-weight: 500;
        }

        pre code {
            background: transparent;
            padding: 0;
            color: inherit;
        }

        /* Lists */
        ul, ol {
            margin-left: var(--space-6);
            margin-bottom: var(--space-4);
        }

        li {
            margin-bottom: var(--space-2);
            line-height: 1.625;
        }

        /* Lab specific */
        .lab-header {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            padding: var(--space-6);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-8);
            border: 2px solid #0ea5e9;
        }

        .lab-header h2 {
            border: none;
            margin-bottom: var(--space-2);
        }

        .objectives {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: var(--space-5);
            margin: var(--space-6) 0;
            border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
        }

        .materials {
            background: #fef3c7;
            border-left: 4px solid var(--color-accent);
            padding: var(--space-5);
            margin: var(--space-6) 0;
            border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
        }

        .step {
            background: white;
            border: 2px solid var(--border-medium);
            padding: var(--space-5);
            margin: var(--space-4) 0;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
        }

        .step-number {
            display: inline-block;
            background: var(--color-primary);
            color: white;
            width: 32px;
            height: 32px;
            line-height: 32px;
            text-align: center;
            border-radius: 50%;
            font-weight: 700;
            margin-right: var(--space-3);
        }

        .exercise {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            padding: var(--space-5);
            border-radius: var(--radius-lg);
            margin: var(--space-5) 0;
            border: 2px solid #60a5fa;
        }

        .rubric {
            background: #f8fafc;
            border: 2px solid var(--border-medium);
            padding: var(--space-5);
            margin: var(--space-6) 0;
            border-radius: var(--radius-lg);
        }

        /* Footer */
        footer {
            background: var(--color-secondary);
            color: var(--text-inverse);
            text-align: center;
            padding: var(--space-8) var(--space-6);
            margin-top: var(--space-12);
        }

        footer p {
            margin: var(--space-2) 0;
            text-align: center;
            color: rgba(255,255,255,0.85);
        }

        /* Back to top */
        .back-to-top {
            position: fixed;
            bottom: var(--space-6);
            right: var(--space-6);
            background: var(--color-primary);
            color: var(--text-inverse);
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-lg);
            border: none;
            font-size: var(--text-xl);
            z-index: 99;
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background: var(--color-primary-light);
            transform: translateY(-2px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            nav {
                position: relative;
            }
            nav ul {
                flex-direction: column;
                padding: 0;
            }
            nav a {
                padding: var(--space-3) var(--space-4);
                border-bottom: 1px solid rgba(255,255,255,0.1);
            }
            main {
                padding: var(--space-4);
            }
            header h1 {
                font-size: var(--text-3xl);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Laboratorio: IoT Cloud - ThingSpeak</h1>
            <p class="subtitle">IF0112 - Complementaria II (IoT)</p>
            <p class="meta">
                <span>â±ï¸ DuraciÃ³n: 2 horas</span>
                <span>ğŸ“… Semana: 9</span>
                <span>ğŸ“ IF0112 - Complementaria II (IoT)</span>
            </p>
        </header>

        <nav>
            <ul>
                <li><a href="##-laboratorio-7-iot-cloud---thingspeak"># Laboratorio 7: IoT Cloud - ThingSpeak</a></li>
<li><a href="#if0112---complementaria-ii-(iot)">IF0112 - Complementaria II (IoT)</a></li>
<li><a href="#ğŸ¯-objetivos-de-aprendizaje">ğŸ¯ Objetivos de Aprendizaje</a></li>
<li><a href="#ğŸ“‹-material-necesario">ğŸ“‹ Material Necesario</a></li>
<li><a href="#ğŸ”§-parte-1-configurar-thingspeak">ğŸ”§ Parte 1: Configurar ThingSpeak</a></li>
<li><a href="#ğŸ”§-parte-2-enviar-datos-desde-esp32">ğŸ”§ Parte 2: Enviar Datos desde ESP32</a></li>
<li><a href="#ğŸ”§-parte-3-visualizaciÃ³n-de-datos-en-thingspeak">ğŸ”§ Parte 3: VisualizaciÃ³n de Datos en ThingSpeak</a></li>
<li><a href="#ğŸ”§-parte-4-leer-datos-desde-thingspeak-(api-read)">ğŸ”§ Parte 4: Leer Datos desde ThingSpeak (API Read)</a></li>
<li><a href="#ğŸ”§-parte-5-sistema-completo-con-reactapp">ğŸ”§ Parte 5: Sistema Completo con ReactApp</a></li>
<li><a href="#ğŸ“-ejercicios-de-entrega">ğŸ“ Ejercicios de Entrega</a></li>
<li><a href="#âœ…-rÃºbrica-de-evaluaciÃ³n">âœ… RÃºbrica de EvaluaciÃ³n</a></li>
<li><a href="#ğŸ”-soluciÃ³n-de-problemas">ğŸ” SoluciÃ³n de Problemas</a></li>
<li><a href="#ğŸ“š-api-de-thingspeak">ğŸ“š API de ThingSpeak</a></li>
<li><a href="#ğŸ¯-relaciÃ³n-con-el-proyecto-final">ğŸ¯ RelaciÃ³n con el Proyecto Final</a></li>
<li><a href="#ğŸ¯-preparaciÃ³n-para-lab-8-(mqtt)">ğŸ¯ PreparaciÃ³n para Lab 8 (MQTT)</a></li>
<li><a href="#ğŸ’¡-consejos-para-thingspeak">ğŸ’¡ Consejos para ThingSpeak</a></li>
<li><a href="#ğŸŒ-recursos-adicionales">ğŸŒ Recursos Adicionales</a></li>
            </ul>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </nav>

        <button class="back-to-top" id="backToTop" aria-label="Volver arriba">â†‘</button>

        <main>
            <section id="#-laboratorio-7-iot-cloud---thingspeak">
<h2># Laboratorio 7: IoT Cloud - ThingSpeak</h2>
</section>
<section id="if0112---complementaria-ii-(iot)">
<h2>IF0112 - Complementaria II (IoT)</h2>

<p><strong>DuraciÃ³n:</strong> 2 horas</p>
<p><strong>Semana:</strong> 9</p>
<p><strong>Nota:</strong> Continuamos la conectividad IoT. Ahora enviamos datos de nuestros sensores a la nube.</p>
<p><strong>Pre-requisitos:</strong> Labs 0-6 completados</p>
<p><strong>Ideal:</strong> Haber hecho Lab 4 (DHT) o traer otro sensor funcionando</p>
<p><strong>Componentes:</strong> ESP32 + Sensor DHT11/DHT22 + WiFi</p>

<p>---</p>

</section>
<section id="ğŸ¯-objetivos-de-aprendizaje">
<h2>ğŸ¯ Objetivos de Aprendizaje</h2>

<p>Al finalizar este laboratorio, el estudiante serÃ¡ capaz de:</p>
<ul>
<li> Crear una cuenta en ThingSpeak</li>
<li> Configurar un canal para recibir datos IoT</li>
<li> Enviar datos de sensores desde ESP32 a la nube</li>
<li> Visualizar datos en tiempo real con grÃ¡ficos</li>
<li> Entender el flujo completo de datos IoT</li>
</ul>

<p>---</p>

</section>
<section id="ğŸ“‹-material-necesario">
<h2>ğŸ“‹ Material Necesario</h2>

<h3>Por estudiante:</h3>
<p><table></p>
<p><thead><tr></p>
<p><th>Componente</th></p>
<p><th>Cantidad</th></p>
<p><th>Notas</th></p>
</tr></thead><tbody>
<p><tr></p>
<p><td>ESP32 DevKit</td></p>
<p><td>1</td></p>
<p><td>Conectado a WiFi</td></p>
</tr>
<p><tr></p>
<p><td>Sensor DHT11/22</td></p>
<p><td>1</td></p>
<p><td>Temperatura y humedad</td></p>
</tr>
<p><tr></p>
<p><td>Cuenta ThingSpeak</td></p>
<p><td>1</td></p>
<p><td>Gratuita en thingspeak.com</td></p>
</tr>
<p><tr></p>
<p><td>Computadora</td></p>
<p><td>1</td></p>
<p><td>Con navegador web</td></p>
</tr>
</tbody></table>

<p><strong>Costo:</strong> GRATIS (ThingSpeak tiene plan gratuito)</p>

<p>---</p>

</section>
<section id="ğŸ”§-parte-1-configurar-thingspeak">
<h2>ğŸ”§ Parte 1: Configurar ThingSpeak</h2>

<h3>Paso 1: Crear Cuenta</h3>

<ul>
<li> Ir a https://thingspeak.com</li>
<li> Click en <strong>"Sign Up"</strong></li>
<li> Registrarse con email o crear cuenta de MathWorks</li>
<li> Verificar email</li>
</ul>

<h3>Paso 2: Crear un Canal</h3>

<ul>
<li> Iniciar sesiÃ³n</li>
<li> Click en <strong>"New Channel"</strong></li>
<li> Llenar formulario:</li>
</ul>

<pre><code>Name: Monitor Ambiental UNAULA
<p>Description: Sistema de monitoreo de temperatura y humedad</p>

<p>Field 1: temperatura</p>
<p>Field 2: humedad</p>
<p>Field 3: luz</p>
<p>Field 4: led_estado</p>
</code></pre>

<ul>
<li> Marcar <strong>"Make Public"</strong> (para facilitar demostraciones)</li>
<li> Click en <strong>"Save Channel"</strong></li>
</ul>

<h3>Paso 3: Obtener API Key</h3>

<ul>
<li> En el canal, ir a la pestaÃ±a <strong>"API Keys"</strong></li>
<li> Copiar el <strong>"Write API Key"</strong> (ej: <code>XXXXXXXXXXXXXXXX</code>)</li>
<li> <strong>GUARDAR ESTA KEY</strong> - Se usarÃ¡ en el cÃ³digo</li>
</ul>

<p><strong>âš ï¸ IMPORTANTE:</strong> No compartir tu API Key pÃºblicamente.</p>

<p>---</p>

</section>
<section id="ğŸ”§-parte-2-enviar-datos-desde-esp32">
<h2>ğŸ”§ Parte 2: Enviar Datos desde ESP32</h2>

<h3>Diagrama del Flujo de Datos:</h3>

<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<p>â”‚   ESP32     â”‚</p>
<p>â”‚             â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  WiFi      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚  â”‚  DHT   â”‚â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ ThingSpeak â”‚</p>
<p>â”‚  â”‚  LDR   â”‚ â”‚  HTTP POST â”‚   Cloud    â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚             â”‚             â”‚</p>
<p>â”‚             â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                  â”‚</p>
<p>â”‚  â”‚ CÃ³digo â”‚ â”‚                  â–¼</p>
<p>â”‚  â”‚  HTTP  â”‚ â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚           â”‚  GrÃ¡ficos   â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   Web View  â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
</code></pre>

<h3>CÃ³digo Base:</h3>

<pre><code>/<em>
 </em> Lab 6 - Parte 1: Enviar datos a ThingSpeak
<p><em> Lee sensores y envÃ­a a la nube cada 20 segundos</p>
 </em>/

<p>#include <WiFi.h></p>
<p>#include <HTTPClient.h></p>
<p>#include "DHT.h"</p>

<p>// ==========================================</p>
<p>// CONFIGURACIÃ“N WIFI</p>
<p>// ==========================================</p>
<p>const char<em> ssid = "NOMBRE_DE_TU_RED";</p>
<p>const char</em> password = "TU_CONTRASENA";</p>

<p>// ==========================================</p>
<p>// CONFIGURACIÃ“N THINGSPEAK</p>
<p>// ==========================================</p>
<p>const char<em> server = "api.thingspeak.com";</p>
<p>const char</em> apiKey = "XXXXXXXXXXXXXXXX";  // REEMPLAZAR con tu Write API Key</p>
<p>const long channelID = 0000000;           // REEMPLAZAR con tu Channel ID</p>
<p>// ==========================================</p>

<p>// ConfiguraciÃ³n de sensores</p>
<p>#define DHTPIN 4</p>
<p>#define DHTTYPE DHT11</p>
<p>DHT dht(DHTPIN, DHTTYPE);</p>

<p>const int PIN_LDR = 34;</p>
<p>const int PIN_LED = 2;</p>

<p>unsigned long lastTime = 0;</p>
<p>const unsigned long INTERVAL = 20000;  // 20 segundos (lÃ­mite gratuito ThingSpeak)</p>

<p>void setup() {</p>
<p>Serial.begin(115200);</p>
<p>delay(1000);</p>

<p>// Iniciar sensores</p>
<p>dht.begin();</p>
<p>pinMode(LED_PIN, OUTPUT);</p>

<p>// Conectar WiFi</p>
<p>Serial.println("Conectando a WiFi...");</p>
<p>WiFi.begin(ssid, password);</p>

<p>while (WiFi.status() != WL_CONNECTED) {</p>
<p>delay(500);</p>
<p>Serial.print(".");</p>
<p>}</p>

<p>Serial.println("\nâœ… WiFi conectado");</p>
<p>Serial.print("  IP: ");</p>
<p>Serial.println(WiFi.localIP());</p>

<p>Serial.println("\n========================================");</p>
<p>Serial.println("  Sistema IoT ThingSpeak iniciado");</p>
<p>Serial.println("  Enviando datos cada 20 segundos");</p>
<p>Serial.println("========================================\n");</p>
<p>}</p>

<p>void loop() {</p>
<p>unsigned long currentTime = millis();</p>

<p>// Enviar datos cada INTERVAL</p>
<p>if (currentTime - lastTime >= INTERVAL) {</p>
<p>lastTime = currentTime;</p>

<p>// Leer sensores</p>
<p>float temp = dht.readTemperature();</p>
<p>float hum = dht.readHumidity();</p>
<p>int luz = analogRead(PIN_LDR);</p>

<p>// Verificar lectura vÃ¡lida</p>
<p>if (isnan(temp) || isnan(hum)) {</p>
<p>Serial.println("âŒ Error leyendo DHT");</p>
<p>return;</p>
<p>}</p>

<p>// Mostrar datos localesmente</p>
<p>Serial.println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");</p>
<p>Serial.print("Temperatura: ");</p>
<p>Serial.print(temp);</p>
<p>Serial.println(" Â°C");</p>
<p>Serial.print("Humedad: ");</p>
<p>Serial.print(hum);</p>
<p>Serial.println(" %");</p>
<p>Serial.print("Luz (LDR): ");</p>
<p>Serial.println(luz);</p>
<p>Serial.println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");</p>

<p>// Enviar a ThingSpeak</p>
<p>if (WiFi.status() == WL_CONNECTED) {</p>
<p>HTTPClient http;</p>

<p>// Construir URL</p>
<p>String url = "http://";</p>
<p>url += server;</p>
<p>url += "/update?api_key=";</p>
<p>url += apiKey;</p>
<p>url += "&field1=";  // Temperatura</p>
<p>url += String(temp, 1);  // 1 decimal</p>
<p>url += "&field2=";  // Humedad</p>
<p>url += String(hum, 1);</p>
<p>url += "&field3=";  // Luz</p>
<p>url += String(luz);</p>

<p>Serial.print("Enviando a ThingSpeak... ");</p>

<p>// Hacer peticiÃ³n HTTP GET</p>
<p>http.begin(url);</p>
<p>int httpCode = http.GET();</p>
<p>http.end();</p>

<p>if (httpCode == 200) {</p>
<p>Serial.println("âœ… Datos enviados!");</p>
<p>} else {</p>
<p>Serial.print("âŒ Error: ");</p>
<p>Serial.println(httpCode);</p>
<p>}</p>
<p>} else {</p>
<p>Serial.println("âŒ WiFi desconectado");</p>
<p>}</p>

<p>Serial.println();</p>
<p>}</p>

<p>// Indicador visual</p>
<p>digitalWrite(LED_PIN, !digitalRead(LED_PIN));</p>
<p>delay(100);</p>
<p>}</p>
</code></pre>

<p>---</p>

</section>
<section id="ğŸ”§-parte-3-visualizaciÃ³n-de-datos-en-thingspeak">
<h2>ğŸ”§ Parte 3: VisualizaciÃ³n de Datos en ThingSpeak</h2>

<h3>Crear GrÃ¡ficos:</h3>

<ul>
<li> En tu canal de ThingSpeak</li>
<li> Ir a la pestaÃ±a <strong>"Private View"</strong> o <strong>"Public View"</strong></li>
<li> Ya verÃ¡s grÃ¡ficos automÃ¡ticos para Field 1 y Field 2</li>
</ul>

<h3>Personalizar GrÃ¡ficos:</h3>

<ul>
<li> Click en el lÃ¡piz (editar) del grÃ¡fico</li>
<li> Configurar:</li>
<li><strong>Title:</strong> "Temperatura en tiempo real"</li>
<li><strong>Y-axis:</strong> "Temperatura (Â°C)"</li>
<li><strong>X-axis:</strong> "Tiempo"</li>
<li><strong>Type:</strong> Line, Bar, Spline</li>
<li><strong>Color:</strong> Tu preferencia</li>
<li> Click en <strong>"Save"</strong></li>
</ul>

<h3>Crear Widgets Adicionales:</h3>

<p><strong>Ejemplo: Gauge (indicador circular)</strong></p>

<ul>
<li> Click <strong>"Add Widget"</strong> â†’ <strong>"Gauge"</strong></li>
<li> Configurar:</li>
<li>Field 1 (temperatura)</li>
<li>Min: 0, Max: 40</li>
<li>Rangos de color:</li>
<li>0-15: Azul (frÃ­o)</li>
<li>15-25: Verde (normal)</li>
<li>25-35: Naranja (calor)</li>
<li>35-40: Rojo (muy caliente)</li>
</ul>

<p>---</p>

</section>
<section id="ğŸ”§-parte-4-leer-datos-desde-thingspeak-(api-read)">
<h2>ğŸ”§ Parte 4: Leer Datos desde ThingSpeak (API Read)</h2>

<p>El ESP32 tambiÃ©n puede leer datos de ThingSpeak:</p>

<pre><code>/<em>
 </em> Lab 6 - Parte 2: Leer Ãºltimo dato de ThingSpeak
<p><em>/</p>

<p>#include <WiFi.h></p>
<p>#include <HTTPClient.h></p>

<p>const char</em> ssid = "NOMBRE_DE_TU_RED";</p>
<p>const char<em> password = "TU_CONTRASENA";</p>

<p>const char</em> server = "api.thingspeak.com";</p>
<p>const long readChannelID = 0000000;  // Tu Channel ID</p>
<p>const char* readAPIKey = "XXXXXXXX"; // Tu Read API Key</p>

<p>void setup() {</p>
<p>Serial.begin(115200);</p>

<p>WiFi.begin(ssid, password);</p>
<p>while (WiFi.status() != WL_CONNECTED) {</p>
<p>delay(500);</p>
<p>Serial.print(".");</p>
<p>}</p>
<p>Serial.println("\nâœ… WiFi conectado");</p>
<p>}</p>

<p>void loop() {</p>
<p>if (WiFi.status() == WL_CONNECTED) {</p>
<p>HTTPClient http;</p>

<p>// URL para leer Ãºltimo dato</p>
<p>String url = "http://";</p>
<p>url += server;</p>
<p>url += "/channels/";</p>
<p>url += String(readChannelID);</p>
<p>url += "/feeds/last.json";</p>
<p>url += "?api_key=";</p>
<p>url += readAPIKey;</p>

<p>http.begin(url);</p>
<p>int httpCode = http.GET();</p>

<p>if (httpCode == 200) {</p>
<p>String payload = http.getString();</p>
<p>Serial.println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");</p>
<p>Serial.println("Ãšltimo dato de ThingSpeak:");</p>
<p>Serial.println(payload);</p>
<p>Serial.println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");</p>

<p>// Parsear JSON simple (ejemplo)</p>
<p>int tempIndex = payload.indexOf("\"field1\":");</p>
<p>if (tempIndex > 0) {</p>
<p>int valorStart = tempIndex + 9;  // DespuÃ©s de "field1":</p>
<p>String temp = payload.substring(valorStart);</p>
<p>temp = temp.substring(0, temp.indexOf(","));</p>
<p>Serial.print("Temperatura guardada: ");</p>
<p>Serial.println(temp);</p>
<p>}</p>
<p>}</p>

<p>http.end();</p>
<p>}</p>

<p>delay(60000);  // Leer cada minuto</p>
<p>}</p>
</code></pre>

<p>---</p>

</section>
<section id="ğŸ”§-parte-5-sistema-completo-con-reactapp">
<h2>ğŸ”§ Parte 5: Sistema Completo con ReactApp</h2>

<p>Crear un sistema que:</p>
<ul>
<li>EnvÃ­a datos a ThingSpeak</li>
<li>Lee el promedio de las Ãºltimas N lecturas</li>
<li>Toma decisiones basadas en datos histÃ³ricos</li>
</ul>

<pre><code>/<em>
 </em> Lab 6 - Parte 3: Sistema con anÃ¡lisis histÃ³rico
<p><em> ThingSpeak puede calcular promedios automÃ¡ticamente</p>
 </em>/

<p>// URL de ThingSpeak para obtener promedio de las Ãºltimas 10 lecturas</p>
<p>String getAverageURL(String field, int numPoints) {</p>
<p>String url = "http://api.thingspeak.com/";</p>
<p>url += "channels/";</p>
<p>url += String(channelID);</p>
<p>url += "/fields/";</p>
<p>url += field;</p>
<p>url += ".json?api_key=";</p>
<p>url += readAPIKey;</p>
<p>url += "&results=";</p>
<p>url += String(numPoints);</p>
<p>url += "&average=true";  // Respuesta con promedio</p>
<p>return url;</p>
<p>}</p>

<p>void usarPromedioHistorico() {</p>
<p>// Obtener promedio de temperatura de las Ãºltimas 10 lecturas</p>
<p>String url = getAverageURL("1", 10);</p>

<p>HTTPClient http;</p>
<p>http.begin(url);</p>
<p>int httpCode = http.GET();</p>

<p>if (httpCode == 200) {</p>
<p>String response = http.getString();</p>
<p>// Parsear y usar el promedio...</p>
<p>Serial.print("Promedio histÃ³rico: ");</p>
<p>Serial.println(response);</p>
<p>}</p>

<p>http.end();</p>
<p>}</p>
</code></pre>

<p>---</p>

</section>
<section id="ğŸ“-ejercicios-de-entrega">
<h2>ğŸ“ Ejercicios de Entrega</h2>

<h3>Ejercicio 1: Monitor Ambiental Completo (50%)</h3>

<p>Implementar un sistema que:</p>

<ul>
<li> <strong>EnvÃ­e a ThingSpeak:</strong></li>
<li>Field 1: Temperatura (DHT)</li>
<li>Field 2: Humedad (DHT)</li>
<li>Field 3: Luz (LDR)</li>
<li>Field 4: Estado del LED (0=apagado, 1=encendido)</li>
</ul>

<ul>
<li> <strong>Reglas de envÃ­o:</strong></li>
<li>Cada 20 segundos mÃ­nimo (lÃ­mite gratuito ThingSpeak)</li>
<li>Solo enviar si los sensores cambian mÃ¡s del 5%</li>
<li>Mostrar en Serial cada intento de envÃ­o</li>
</ul>

<ul>
<li> <strong>VisualizaciÃ³n en ThingSpeak:</strong></li>
<li>Crear al menos 3 grÃ¡ficos: temperatura, humedad, luz</li>
<li>1 gauge para temperatura</li>
<li>1 indicador numÃ©rico para humedad</li>
</ul>

<p><strong>Entregable:</strong> CÃ³digo + capturas de ThingSpeak mostrando los grÃ¡ficos</p>

<h3>Ejercicio 2: Sistema de Alertas (50%)</h3>

<p>Implementar alertas que:</p>

<ul>
<li> <strong>Si temperatura > 30Â°C:</strong></li>
<li>Field 5 = 1 (alerta temperatura)</li>
<li>Encender LED rojo</li>
</ul>

<ul>
<li> <strong>Si humedad < 30% o > 80%:</strong></li>
<li>Field 6 = 1 (alerta humedad)</li>
<li>Encender LED amarillo</li>
</ul>

<ul>
<li> <strong>Si luz < 500:</strong></li>
<li>Field 7 = 1 (alerta oscuridad)</li>
<li>Encender LED azul</li>
</ul>

<ul>
<li> <strong>Todo normal:</strong></li>
<li>Fields 5, 6, 7 = 0</li>
<li>LED verde parpadeando</li>
</ul>

<ul>
<li> <strong>ThingSpeak:</strong></li>
<li>Crear grÃ¡fico de "Estados de Alerta"</li>
<li>Usar React App para mostrar alerta visual</li>
</ul>

<p><strong>Entregable:</strong> CÃ³digo funcionando + capturas del sistema</p>

<p>---</p>

</section>
<section id="âœ…-rÃºbrica-de-evaluaciÃ³n">
<h2>âœ… RÃºbrica de EvaluaciÃ³n</h2>

<p><table></p>
<p><thead><tr></p>
<p><th>Criterio</th></p>
<p><th>Puntos</th></p>
<p><th>DescripciÃ³n</th></p>
</tr></thead><tbody>
<p><tr></p>
<p><td><strong>Cuenta ThingSpeak</strong></td></p>
<p><td>10</td></p>
<p><td>Canal creado y configurado correctamente</td></p>
</tr>
<p><tr></p>
<p><td><strong>EnvÃ­o de datos</strong></td></p>
<p><td>25</td></p>
<p><td>ESP32 envÃ­a datos correctamente</td></p>
</tr>
<p><tr></p>
<p><td><strong>GrÃ¡ficos ThingSpeak</strong></td></p>
<p><td>20</td></p>
<p><td>VisualizaciÃ³n clara y funcional</td></p>
</tr>
<p><tr></p>
<p><td><strong>Sistema alertas</strong></td></p>
<p><td>25</td></p>
<p><td>LÃ³gica de alertas implementada</td></p>
</tr>
<p><tr></p>
<p><td><strong>Manejo de errores</strong></td></p>
<p><td>10</td></p>
<p><td>ReconexiÃ³n WiFi y reintentos</td></p>
</tr>
<p><tr></p>
<p><td><strong>DocumentaciÃ³n</strong></td></p>
<p><td>10</td></p>
<p><td>CÃ³digo comentado + capturas</td></p>
</tr>
</tbody></table>

<p>---</p>

</section>
<section id="ğŸ”-soluciÃ³n-de-problemas">
<h2>ğŸ” SoluciÃ³n de Problemas</h2>

<p><table></p>
<p><thead><tr></p>
<p><th>Problema</th></p>
<p><th>Causa</th></p>
<p><th>SoluciÃ³n</th></p>
</tr></thead><tbody>
<p><tr></p>
<p><td>Error -300 (Invalid API Key)</td></p>
<p><td>API Key incorrecta</td></p>
<p><td>Verificar Write API Key</td></p>
</tr>
<p><tr></p>
<p><td>Error 0 (No connection)</td></p>
<p><td>WiFi desconectado</td></p>
<p><td>Implementar reconexiÃ³n</td></p>
</tr>
<p><tr></p>
<p><td>Datos no aparecen</td></p>
<p><td>Channel ID incorrecto</td></p>
<p><td>Verificar channelID</td></p>
</tr>
<p><tr></p>
<p><td>GrÃ¡fico vacÃ­o</td></p>
<p><td>Field numbers incorrectos</td></p>
<p><td>Usar field1, field2...</td></p>
</tr>
<p><tr></p>
<p><td>"Rate limit exceeded"</td></p>
<p><td>EnvÃ­o muy frecuente</td></p>
<p><td>MÃ­nimo 15-20 segundos entre envÃ­os</td></p>
</tr>
</tbody></table>

<p>---</p>

</section>
<section id="ğŸ“š-api-de-thingspeak">
<h2>ğŸ“š API de ThingSpeak</h2>

<h3>Enviar un dato:</h3>
<pre><code>GET /update?api_key=XXX&field1=100
</code></pre>

<h3>Enviar mÃºltiples datos:</h3>
<pre><code>GET /update?api_key=XXX&field1=25.5&field2=60&field3=1000
</code></pre>

<h3>Leer Ãºltimo dato:</h3>
<pre><code>GET /channels/123/feeds/last.json?api_key=XXX
</code></pre>

<h3>Leer Ãºltimos N datos:</h3>
<pre><code>GET /channels/123/feeds.json?api_key=XXX&results=10
</code></pre>

<h3>Promedio de datos:</h3>
<pre><code>GET /channels/123/fields/1.json?api_key=XXX&average=round
</code></pre>

<p>---</p>

</section>
<section id="ğŸ¯-relaciÃ³n-con-el-proyecto-final">
<h2>ğŸ¯ RelaciÃ³n con el Proyecto Final</h2>

<p>Este laboratorio es <strong>FUNDAMENTAL</strong>:</p>

<ul>
<li>âœ… <strong>IoT Cloud</strong> â†’ Almacenamiento de datos en la nube</li>
<li>âœ… <strong>VisualizaciÃ³n</strong> â†’ GrÃ¡ficos automÃ¡ticos</li>
<li>âœ… <strong>API REST</strong> â†’ ComunicaciÃ³n HTTP estÃ¡ndar</li>
<li>âœ… <strong>Almacenamiento histÃ³rico</strong> â†’ Base de datos del proyecto</li>
</ul>

<p><strong>Para el proyecto final:</strong></p>
<ul>
<li>Todos los datos de sensores se almacenarÃ¡n aquÃ­</li>
<li>ThingSpeak servirÃ¡ como base de datos principal</li>
<li>Se pueden crear visualizaciones personalizadas</li>
</ul>

<p>---</p>

</section>
<section id="ğŸ¯-preparaciÃ³n-para-lab-8-(mqtt)">
<h2>ğŸ¯ PreparaciÃ³n para Lab 8 (MQTT)</h2>

<p>El <strong>Laboratorio 8</strong> trabajarÃ¡ con:</p>
<ul>
<li><strong>SPIFFS</strong> (Sistema de archivos en ESP32)</li>
<li>Almacenamiento local de datos</li>
<li>Buffer de datos cuando no hay WiFi</li>
<li>ExportaciÃ³n de datos histÃ³ricos</li>
</ul>

<p><strong>Requisito previo:</strong> Lab 6 funcionando con ThingSpeak</p>

<p>---</p>

</section>
<section id="ğŸ’¡-consejos-para-thingspeak">
<h2>ğŸ’¡ Consejos para ThingSpeak</h2>

<h3>LÃ­mites del Plan Gratuito:</h3>
<ul>
<li><strong>3 canales</strong> por cuenta</li>
<li><strong>15 segundos</strong> entre actualizaciones (mÃ­nimo)</li>
<li><strong>4 fields</strong> por canal (se pueden agregar mÃ¡s)</li>
<li><strong>Mensajes privados</strong> ilimitados</li>
<li><strong>Apps</strong> ilimitadas</li>
</ul>

<h3>Mejores PrÃ¡cticas:</h3>
<ul>
<li> <strong>Rate limiting:</strong> Esperar mÃ­nimo 15-20 segundos entre envÃ­os</li>
<li> <strong>ValidaciÃ³n:</strong> Verificar que los datos sean razonables antes de enviar</li>
<li> <strong>Reintentos:</strong> Implementar reintentos si falla el envÃ­o</li>
<li> <strong>Timestamps:</strong> ThingSpeak agrega timestamp automÃ¡ticamente</li>
</ul>

<p>---</p>

</section>
<section id="ğŸŒ-recursos-adicionales">
<h2>ğŸŒ Recursos Adicionales</h2>

<ul>
<li><strong>DocumentaciÃ³n ThingSpeak:</strong> https://www.mathworks.com/help/thingspeak/</li>
<li><strong>Foro de ThingSpeak:</strong> https://www.mathworks.com/matlabcentral/answers/forum/thingspeak-community-forum</li>
<li><strong>Tutoriales en espaÃ±ol:</strong> Buscar "ThingSpeak ESP32 tutorial" en YouTube</li>
</ul>

<p>---</p>

<p><strong>UNAULA - IngenierÃ­a InformÃ¡tica - Complementaria II (IoT)</strong></p>
</section>

        </main>

        <footer>
            <p><strong>IF0112 - Complementaria II (IoT)</strong></p>
            <p>Universidad AutÃ³noma Latinoamericana (UNAULA) - IngenierÃ­a InformÃ¡tica - 2026-I</p>
            <p style="margin-top: 1rem; font-size: 0.85rem; opacity: 0.8;">Laboratorio HTML | Ãšltima actualizaciÃ³n: 2026-02-02</p>
        </footer>
    </div>

    <script>
        (function() {
            'use strict';
            const progressFill = document.getElementById('progressFill');
            const backToTop = document.getElementById('backToTop');

            if (!progressFill || !backToTop) return;

            function updateProgress() {
                const windowHeight = window.innerHeight;
                const documentHeight = document.documentElement.scrollHeight - windowHeight;
                const scrolled = window.scrollY;
                const progress = (scrolled / documentHeight) * 100;
                progressFill.style.width = Math.min(progress, 100) + '%';

                if (scrolled > windowHeight * 0.5) {
                    backToTop.classList.add('visible');
                } else {
                    backToTop.classList.remove('visible');
                }
            }

            function scrollToTop() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            let ticking = false;
            function onScroll() {
                if (!ticking) {
                    window.requestAnimationFrame(function() {
                        updateProgress();
                        ticking = false;
                    });
                    ticking = true;
                }
            }

            window.addEventListener('scroll', onScroll, { passive: true });
            backToTop.addEventListener('click', scrollToTop);
            updateProgress();
        })();
    </script>
</body>
</html>
