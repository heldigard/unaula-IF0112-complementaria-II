<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorio: Entradas Anal√≥gicas - LDR y Potenci√≥metro</title>
    <style>
        /* ============================================
           DESIGN SYSTEM - Spacing Scale (8px base)
           ============================================ */
        :root {
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;

            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --text-3xl: 1.875rem;
            --text-4xl: 2.25rem;

            --color-primary: #1e40af;
            --color-primary-light: #3b82f6;
            --color-secondary: #0f172a;
            --color-accent: #f59e0b;

            --text-primary: #0f172a;
            --text-secondary: #334155;
            --text-muted: #64748b;
            --text-inverse: #ffffff;

            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;

            --border-light: #e2e8f0;
            --border-medium: #cbd5e1;

            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1);

            --radius-sm: 0.25rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.5;
            color: var(--text-primary);
            background: var(--bg-tertiary);
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            background: var(--bg-primary);
            box-shadow: var(--shadow-xl);
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
            color: var(--text-inverse);
            padding: var(--space-8) var(--space-6);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 400px;
            height: 400px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            pointer-events: none;
        }

        header h1 {
            font-size: var(--text-4xl);
            font-weight: 700;
            margin-bottom: var(--space-2);
            position: relative;
            z-index: 1;
        }

        header .subtitle {
            font-size: var(--text-lg);
            opacity: 0.95;
            font-weight: 400;
        }

        header .meta {
            margin-top: var(--space-4);
            font-size: var(--text-sm);
            opacity: 0.85;
            display: inline-flex;
            align-items: center;
            gap: var(--space-3);
            flex-wrap: wrap;
            justify-content: center;
        }

        header .meta span {
            padding: var(--space-1) var(--space-3);
            background: rgba(255,255,255,0.15);
            border-radius: var(--radius-lg);
        }

        /* Navigation */
        nav {
            background: var(--color-secondary);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-md);
        }

        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            padding: 0 var(--space-4);
            max-width: 100%;
            overflow-x: auto;
        }

        nav li {
            margin: 0;
        }

        nav a {
            display: block;
            padding: var(--space-3) var(--space-4);
            color: rgba(255,255,255,0.85);
            text-decoration: none;
            transition: all 0.2s ease;
            font-size: var(--text-sm);
            font-weight: 500;
            white-space: nowrap;
            border-bottom: 2px solid transparent;
        }

        nav a:hover {
            background: rgba(255,255,255,0.1);
            color: var(--text-inverse);
        }

        .progress-bar {
            height: 3px;
            background: rgba(255,255,255,0.2);
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-accent), #fbbf24);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Main Content */
        main {
            padding: var(--space-8);
            max-width: 1024px;
            margin: 0 auto;
        }

        section {
            margin-bottom: var(--space-12);
            scroll-margin-top: 80px;
        }

        /* Typography */
        section h2 {
            color: var(--color-primary);
            border-bottom: 3px solid var(--color-primary-light);
            padding-bottom: var(--space-2);
            margin-bottom: var(--space-6);
            font-size: var(--text-3xl);
            font-weight: 700;
        }

        section h3 {
            color: var(--color-primary);
            margin: var(--space-6) 0 var(--space-4);
            font-size: var(--text-2xl);
            font-weight: 600;
        }

        section h4 {
            color: var(--text-secondary);
            margin: var(--space-4) 0 var(--space-2);
            font-size: var(--text-lg);
            font-weight: 600;
        }

        p {
            margin-bottom: var(--space-4);
            line-height: 1.625;
            max-width: 75ch;
        }

        /* Callout Boxes */
        .info-box {
            padding: var(--space-5);
            border-radius: var(--radius-lg);
            margin: var(--space-5) 0;
            border-left: 4px solid;
        }

        .info-box.success { background: #f0fdf4; border-color: #10b981; }
        .info-box.warning { background: #fef3c7; border-color: #f59e0b; }
        .info-box.info { background: #dbeafe; border-color: #3b82f6; }
        .info-box.danger { background: #fef2f2; border-color: #ef4444; }

        .alert-box {
            background: #fee2e2;
            border-left: 4px solid #ef4444;
            padding: var(--space-5);
            margin: var(--space-5) 0;
            border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
            box-shadow: var(--shadow-sm);
        }

        .intro-box {
            background: #eff6ff;
            border-left: 4px solid var(--color-primary-light);
            padding: var(--space-5);
            margin: var(--space-6) 0;
            border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
            box-shadow: var(--shadow-sm);
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--space-6) 0;
            font-size: var(--text-sm);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        th {
            background: var(--color-primary);
            color: var(--text-inverse);
            padding: var(--space-3) var(--space-4);
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.025em;
            font-size: var(--text-xs);
        }

        td {
            padding: var(--space-3) var(--space-4);
            border-bottom: 1px solid var(--border-light);
        }

        tbody tr:nth-child(even) {
            background: var(--bg-secondary);
        }

        tbody tr:hover {
            background: #e0e7ff;
            transition: background 0.15s ease;
        }

        /* Code */
        pre {
            background: var(--color-secondary);
            color: #e2e8f0;
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            overflow-x: auto;
            margin: var(--space-4) 0;
            font-size: var(--text-sm);
            line-height: 1.625;
            box-shadow: var(--shadow-md);
        }

        code {
            background: var(--bg-tertiary);
            color: var(--color-primary);
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-md);
            font-size: 0.9em;
            font-weight: 500;
        }

        pre code {
            background: transparent;
            padding: 0;
            color: inherit;
        }

        /* Lists */
        ul, ol {
            margin-left: var(--space-6);
            margin-bottom: var(--space-4);
        }

        li {
            margin-bottom: var(--space-2);
            line-height: 1.625;
        }

        /* Lab specific */
        .lab-header {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            padding: var(--space-6);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-8);
            border: 2px solid #0ea5e9;
        }

        .lab-header h2 {
            border: none;
            margin-bottom: var(--space-2);
        }

        .objectives {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: var(--space-5);
            margin: var(--space-6) 0;
            border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
        }

        .materials {
            background: #fef3c7;
            border-left: 4px solid var(--color-accent);
            padding: var(--space-5);
            margin: var(--space-6) 0;
            border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
        }

        .step {
            background: white;
            border: 2px solid var(--border-medium);
            padding: var(--space-5);
            margin: var(--space-4) 0;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
        }

        .step-number {
            display: inline-block;
            background: var(--color-primary);
            color: white;
            width: 32px;
            height: 32px;
            line-height: 32px;
            text-align: center;
            border-radius: 50%;
            font-weight: 700;
            margin-right: var(--space-3);
        }

        .exercise {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            padding: var(--space-5);
            border-radius: var(--radius-lg);
            margin: var(--space-5) 0;
            border: 2px solid #60a5fa;
        }

        .rubric {
            background: #f8fafc;
            border: 2px solid var(--border-medium);
            padding: var(--space-5);
            margin: var(--space-6) 0;
            border-radius: var(--radius-lg);
        }

        /* Footer */
        footer {
            background: var(--color-secondary);
            color: var(--text-inverse);
            text-align: center;
            padding: var(--space-8) var(--space-6);
            margin-top: var(--space-12);
        }

        footer p {
            margin: var(--space-2) 0;
            text-align: center;
            color: rgba(255,255,255,0.85);
        }

        /* Back to top */
        .back-to-top {
            position: fixed;
            bottom: var(--space-6);
            right: var(--space-6);
            background: var(--color-primary);
            color: var(--text-inverse);
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-lg);
            border: none;
            font-size: var(--text-xl);
            z-index: 99;
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background: var(--color-primary-light);
            transform: translateY(-2px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            nav {
                position: relative;
            }
            nav ul {
                flex-direction: column;
                padding: 0;
            }
            nav a {
                padding: var(--space-3) var(--space-4);
                border-bottom: 1px solid rgba(255,255,255,0.1);
            }
            main {
                padding: var(--space-4);
            }
            header h1 {
                font-size: var(--text-3xl);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Laboratorio: Entradas Anal√≥gicas - LDR y Potenci√≥metro</h1>
            <p class="subtitle">IF0112 - Complementaria II (IoT)</p>
            <p class="meta">
                <span>‚è±Ô∏è Duraci√≥n: 2 horas</span>
                <span>üìÖ Semana: 5</span>
                <span>üéì IF0112 - Complementaria II (IoT)</span>
            </p>
        </header>

        <nav>
            <ul>
                <li><a href="##-laboratorio-3-entradas-anal√≥gicas---ldr-y-potenci√≥metro"># Laboratorio 3: Entradas Anal√≥gicas - LDR y Potenci√≥metro</a></li>
<li><a href="#if0112---complementaria-ii-(iot)">IF0112 - Complementaria II (IoT)</a></li>
<li><a href="#üéØ-objetivos-de-aprendizaje">üéØ Objetivos de Aprendizaje</a></li>
<li><a href="#üìã-material-necesario">üìã Material Necesario</a></li>
<li><a href="#üîß-conceptos-te√≥ricos">üîß Conceptos Te√≥ricos</a></li>
<li><a href="#üîß-parte-1-leer-ldr-(sensor-de-luz)">üîß Parte 1: Leer LDR (Sensor de Luz)</a></li>
<li><a href="#üîß-parte-2-control-autom√°tico-de-iluminaci√≥n">üîß Parte 2: Control Autom√°tico de Iluminaci√≥n</a></li>
<li><a href="#üîß-parte-3-potenci√≥metro-(control-manual)">üîß Parte 3: Potenci√≥metro (Control Manual)</a></li>
<li><a href="#üîß-parte-4-sistema-combinado-(manual-+-autom√°tico)">üîß Parte 4: Sistema Combinado (Manual + Autom√°tico)</a></li>
<li><a href="#üìù-ejercicios-de-entrega">üìù Ejercicios de Entrega</a></li>
<li><a href="#‚úÖ-r√∫brica-de-evaluaci√≥n">‚úÖ R√∫brica de Evaluaci√≥n</a></li>
<li><a href="#üîç-soluci√≥n-de-problemas">üîç Soluci√≥n de Problemas</a></li>
<li><a href="#üìö-calibraci√≥n-del-sensor">üìö Calibraci√≥n del Sensor</a></li>
<li><a href="#üéØ-relaci√≥n-con-el-proyecto-final">üéØ Relaci√≥n con el Proyecto Final</a></li>
<li><a href="#üéØ-preparaci√≥n-para-lab-4">üéØ Preparaci√≥n para Lab 4</a></li>
<li><a href="#üõí-lista-de-compras-(medell√≠n)">üõí Lista de Compras (Medell√≠n)</a></li>
            </ul>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </nav>

        <button class="back-to-top" id="backToTop" aria-label="Volver arriba">‚Üë</button>

        <main>
            <section id="#-laboratorio-3-entradas-anal√≥gicas---ldr-y-potenci√≥metro">
<h2># Laboratorio 3: Entradas Anal√≥gicas - LDR y Potenci√≥metro</h2>
</section>
<section id="if0112---complementaria-ii-(iot)">
<h2>IF0112 - Complementaria II (IoT)</h2>

<p><strong>Duraci√≥n:</strong> 2 horas</p>
<p><strong>Semana:</strong> 5</p>
<p><strong>Pre-requisitos:</strong> Labs 1-2 completados</p>
<p><strong>Componentes:</strong> ESP32 + LDR + Potenci√≥metro + LED</p>

<p>---</p>

</section>
<section id="üéØ-objetivos-de-aprendizaje">
<h2>üéØ Objetivos de Aprendizaje</h2>

<p>Al finalizar este laboratorio, el estudiante ser√° capaz de:</p>
<ul>
<li> Leer entradas anal√≥gicas usando el ADC del ESP32</li>
<li> Usar divisores de voltaje con sensores resistivos</li>
<li> Implementar control de iluminaci√≥n autom√°tica</li>
<li> Mapear valores anal√≥gicos a rangos √∫tiles</li>
<li> Crear sistemas de respuesta sensorial</li>
</ul>

<p>---</p>

</section>
<section id="üìã-material-necesario">
<h2>üìã Material Necesario</h2>

<h3>Por estudiante:</h3>
<p><table></p>
<p><thead><tr></p>
<p><th>Componente</th></p>
<p><th>Cantidad</th></p>
<p><th>Notas</th></p>
<p><th>Precio aprox.</th></p>
</tr></thead><tbody>
<p><tr></p>
<p><td>ESP32 DevKit</td></p>
<p><td>1</td></p>
<p><td>Con cable USB</td></p>
<p><td>$25.000 - $35.000</td></p>
</tr>
<p><tr></p>
<p><td>LDR (Fotoresistencia)</td></p>
<p><td>1</td></p>
<p><td>5mm di√°metro</td></p>
<p><td>$1.000 - $2.000</td></p>
</tr>
<p><tr></p>
<p><td>Potenci√≥metro 10KŒ©</td></p>
<p><td>1</td></p>
<p><td>Lineal o rotativo</td></p>
<p><td>$1.500 - $2.500</td></p>
</tr>
<p><tr></p>
<p><td>Resistencia 10KŒ©</td></p>
<p><td>1</td></p>
<p><td>Para divisor con LDR</td></p>
<p><td>$100</td></p>
</tr>
<p><tr></p>
<p><td>Resistencia 220Œ©</td></p>
<p><td>1</td></p>
<p><td>Para LED</td></p>
<p><td>$100</td></p>
</tr>
<p><tr></p>
<p><td>LED 5mm</td></p>
<p><td>1</td></p>
<p><td>Cualquier color</td></p>
<p><td>$200 - $500</td></p>
</tr>
<p><tr></p>
<p><td>Protoboard</td></p>
<p><td>1</td></p>
<p><td>830 puntos</td></p>
<p><td>$5.000 - $8.000</td></p>
</tr>
<p><tr></p>
<p><td>Cables jumper</td></p>
<p><td>10+</td></p>
<p><td>Macho-macho</td></p>
<p><td>$2.000 - $3.000</td></p>
</tr>
</tbody></table>

<p><strong>üí∞ Costo total componentes (si no tiene ESP32): ~$15.000 - $20.000 COP</strong></p>
<p><strong>üìç D√≥nde comprar en Medell√≠n:</strong> Centro (San Alejo), El Hueco, tiendas de electr√≥nica en Laureles</p>

<p>---</p>

</section>
<section id="üîß-conceptos-te√≥ricos">
<h2>üîß Conceptos Te√≥ricos</h2>

<h3>¬øQu√© es una Entrada Anal√≥gica?</h3>

<p>A diferencia de lo <strong>digital</strong> (solo 0 o 1), una se√±al <strong>anal√≥gica</strong> puede tener infinitos valores intermedios.</p>

<pre><code>Digital:    0 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 1
<p>Anal√≥gico:  0 ‚îÄ‚ñ¨‚îÄ‚ñ¨‚îÄ‚ñ¨‚îÄ‚ñ¨‚îÄ‚ñ¨‚îÄ‚ñ¨‚îÄ‚ñ¨‚îÄ‚ñ¨‚îÄ‚ñ¨ 1</p>
<p>‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ valores continuos ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ</p>
</code></pre>

<h3>ADC (Conversor Anal√≥gico-Digital)</h3>

<p>El ESP32 tiene un ADC de <strong>12 bits</strong>:</p>
<ul>
<li><strong>Rango de lectura:</strong> 0 a 4095</li>
<li><strong>Voltaje:</strong> 0V a 3.3V</li>
<li><strong>Resoluci√≥n:</strong> 4096 niveles posibles</li>
</ul>

<pre><code>0V     ‚Üí ADC = 0
<ul>
<li>65V  ‚Üí ADC = 2048</li>
<li>3V   ‚Üí ADC = 4095</li>
</code></pre>
</ul>

<h3>Divisor de Voltaje para LDR</h3>

<p>La LDR var√≠a su resistencia seg√∫n la luz:</p>
<ul>
<li><strong>Oscuridad:</strong> ~1MŒ© (1 mill√≥n de ohmios)</li>
<li><strong>Luz directa:</strong> ~100Œ©</li>
</ul>

<p>Para leer esto con el ADC, usamos un divisor de voltaje:</p>

<pre><code>3.3V ‚îÄ‚îÄ[10KŒ© fija]‚îÄ‚îÄ‚î¨‚îÄ‚îÄ ADC (GPIO34)
<p>‚îÇ</p>
<p>[LDR]</p>
<p>‚îÇ</p>
<p>GND</p>
</code></pre>

<p><strong>¬øC√≥mo funciona?</strong></p>
<ul>
<li><strong>Mucho luz</strong> ‚Üí LDR tiene poca resistencia ‚Üí Voltaje en ADC es BAJO</li>
<li><strong>Poca luz</strong> ‚Üí LDR tiene mucha resistencia ‚Üí Voltaje en ADC es ALTO</li>
</ul>

<p>---</p>

</section>
<section id="üîß-parte-1-leer-ldr-(sensor-de-luz)">
<h2>üîß Parte 1: Leer LDR (Sensor de Luz)</h2>

<h3>Conexi√≥n:</h3>
<pre><code>ESP32 3.3V ‚îÄ‚îÄ[10KŒ©]‚îÄ‚îÄ‚î¨‚îÄ‚îÄ GPIO34 (ADC1_CH6)
<p>‚îÇ</p>
<p>[LDR]</p>
<p>‚îÇ</p>
<p>GND</p>
</code></pre>

<p><strong>Nota importante:</strong> El ESP32 tiene restricciones en los pines ADC. Usar GPIO34, 35, 32, 33 para lecturas anal√≥gicas.</p>

<h3>C√≥digo b√°sico:</h3>
<pre><code>/<em>
 </em> Lab 3 - Parte 1: Lectura de LDR (sensor de luz)
<p><em>/</p>

<p>const int PIN_LDR = 34;  // ADC1_CH6 - Solo entrada</p>

<p>void setup() {</p>
<p>Serial.begin(115200);</p>
<p>Serial.println("Lab 3: Sensor de Luz (LDR)");</p>

<p>// El ESP32 no requiere pinMode para entradas anal√≥gicas</p>
<p>}</p>

<p>void loop() {</p>
<p>// Leer valor anal√≥gico (0-4095)</p>
<p>int valorLDR = analogRead(PIN_LDR);</p>

<p>// Convertir a voltaje (0-3.3V)</p>
<p>float voltaje = (valorLDR </em> 3.3) / 4095.0;</p>

<p>// Mostrar valores</p>
<p>Serial.print("LDR RAW: ");</p>
<p>Serial.print(valorLDR);</p>
<p>Serial.print(" | Voltaje: ");</p>
<p>Serial.print(voltaje, 2);</p>
<p>Serial.println("V");</p>

<p>// Interpretar el nivel de luz</p>
<p>if (valorLDR < 1000) {</p>
<p>Serial.println("  ‚Üí MUY OSCURO üî¶");</p>
<p>} else if (valorLDR < 2500) {</p>
<p>Serial.println("  ‚Üí POCO LUZ üåô");</p>
<p>} else if (valorLDR < 3500) {</p>
<p>Serial.println("  ‚Üí LUZ NORMAL ‚òÄÔ∏è");</p>
<p>} else {</p>
<p>Serial.println("  -> MUCHA LUZ ‚òÄÔ∏è‚òÄÔ∏è‚òÄÔ∏è");</p>
<p>}</p>

<p>Serial.println();</p>
<p>delay(1000);</p>
<p>}</p>
</code></pre>

<p>---</p>

</section>
<section id="üîß-parte-2-control-autom√°tico-de-iluminaci√≥n">
<h2>üîß Parte 2: Control Autom√°tico de Iluminaci√≥n</h2>

<h3>Agregamos un LED que se enciende automaticamente cuando oscurece:</h3>

<pre><code>3.3V ‚îÄ‚îÄ[10KŒ©]‚îÄ‚îÄ‚î¨‚îÄ‚îÄ GPIO34 (LDR)
<p>‚îÇ</p>
<p>[LDR]</p>
<p>‚îÇ</p>
<p>GND</p>

<p>GPIO2 ‚îÄ‚îÄ[220Œ©]‚îÄ‚îÄ LED ‚îÄ‚îÄ‚îÄ GND</p>
</code></pre>

<h3>C√≥digo:</h3>
<pre><code>/<em>
 </em> Lab 3 - Parte 2: Luz autom√°tica
<p><em> LED se enciende cuando est√° oscuro</p>
 </em>/

<p>const int PIN_LDR = 34;</p>
<p>const int PIN_LED = 2;</p>

<p>// Umbral: ajustar seg√∫n ambiente</p>
<p>const int UMBRAL_OSCURO = 1500;  // Por debajo de esto = oscuro</p>
<p>const int UMBRAL_CLARO = 2000;   // Por encima de esto = claro</p>
<p>// Nota: UMBRAL_CLARO > UMBRAL_OSCURO para evitar "flicker"</p>

<p>bool ledEncendido = false;</p>

<p>void setup() {</p>
<p>Serial.begin(115200);</p>
<p>pinMode(PIN_LED, OUTPUT);</p>
<p>digitalWrite(PIN_LED, LOW);</p>

<p>Serial.println("Sistema de control autom√°tico de iluminaci√≥n");</p>
<p>}</p>

<p>void loop() {</p>
<p>int valorLDR = analogRead(PIN_LDR);</p>

<p>Serial.print("Luz: ");</p>
<p>Serial.print(valorLDR);</p>

<p>// L√≥gica con hist√©resis (evita encendido/apagado r√°pido)</p>
<p>if (valorLDR < UMBRAL_OSCURO && !ledEncendido) {</p>
<p>// Est√° oscuro ‚Üí encender LED</p>
<p>digitalWrite(PIN_LED, HIGH);</p>
<p>ledEncendido = true;</p>
<p>Serial.println(" ‚Üí OSCURO, LED ON üí°");</p>
<p>}</p>
<p>else if (valorLDR > UMBRAL_CLARO && ledEncendido) {</p>
<p>// Est√° claro ‚Üí apagar LED</p>
<p>digitalWrite(PIN_LED, LOW);</p>
<p>ledEncendido = false;</p>
<p>Serial.println(" ‚Üí CLARO, LED OFF");</p>
<p>}</p>
<p>else {</p>
<p>Serial.println(" ‚Üí Sin cambios");</p>
<p>}</p>

<p>delay(500);</p>
<p>}</p>
</code></pre>

<p>---</p>

</section>
<section id="üîß-parte-3-potenci√≥metro-(control-manual)">
<h2>üîß Parte 3: Potenci√≥metro (Control Manual)</h2>

<h3>Conexi√≥n:</h3>
<pre><code>3.3V ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ[10KŒ© pot]‚îÄ‚îÄ‚î¨‚îÄ‚îÄ GND
<p>‚îÇ              ‚îÇ</p>
<p>‚îî‚îÄ‚îÄ ADC GPIO32 ‚îÄ‚îò</p>
<p>(Terminal central)</p>
</code></pre>

<h3>C√≥digo:</h3>
<pre><code>/<em>
 </em> Lab 3 - Parte 3: Control de brillo con potenci√≥metro
<p><em>/</p>

<p>const int PIN_POT = 32;  // ADC1_CH4</p>
<p>const int PIN_LED = 2;   // PWM</p>

<p>const int PWM_CHANNEL = 0;</p>
<p>const int PWM_FREQ = 5000;</p>
<p>const int PWM_RES = 8;   // 0-255</p>

<p>void setup() {</p>
<p>Serial.begin(115200);</p>

<p>// Configurar PWM</p>
<p>ledcSetup(PWM_CHANNEL, PWM_FREQ, PWM_RES);</p>
<p>ledcAttachPin(PIN_LED, PWM_CHANNEL);</p>

<p>Serial.println("Control de brillo con potenci√≥metro");</p>
<p>}</p>

<p>void loop() {</p>
<p>// Leer potenci√≥metro (0-4095)</p>
<p>int valorPot = analogRead(PIN_POT);</p>

<p>// Mapear a rango PWM (0-255)</p>
<p>int brillo = map(valorPot, 0, 4095, 0, 255);</p>

<p>// Aplicar brillo al LED</p>
<p>ledcWrite(PWM_CHANNEL, brillo);</p>

<p>// Mostrar valores</p>
<p>Serial.print("Pot: ");</p>
<p>Serial.print(valorPot);</p>
<p>Serial.print(" | Brillo: ");</p>
<p>Serial.print(brillo);</p>
<p>Serial.print(" (");</p>
<p>Serial.print((brillo </em> 100) / 255);</p>
<p>Serial.println("%)");</p>

<p>delay(100);</p>
<p>}</p>
</code></pre>

<p>---</p>

</section>
<section id="üîß-parte-4-sistema-combinado-(manual-+-autom√°tico)">
<h2>üîß Parte 4: Sistema Combinado (Manual + Autom√°tico)</h2>

<p>Un bot√≥n cambia entre modo manual (potenci√≥metro) y autom√°tico (LDR):</p>

<pre><code>Bot√≥n en GPIO15 (INPUT_PULLUP):
<ul>
<li>Presionado = Modo manual</li>
<li>Suelto = Modo autom√°tico</li>
</code></pre>
</ul>

<h3>C√≥digo:</h3>
<pre><code>/<em>
 </em> Lab 3 - Parte 4: Sistema dual (manual/autom√°tico)
<p>*/</p>

<p>const int PIN_LDR = 34;</p>
<p>const int PIN_POT = 32;</p>
<p>const int PIN_LED = 2;</p>
<p>const int PIN_BOTON = 15;</p>

<p>const int UMBRAL_OSCURO = 1500;</p>
<p>const int UMBRAL_CLARO = 2000;</p>

<p>const int PWM_CH = 0;</p>
<p>bool modoManual = false;  // false = autom√°tico, true = manual</p>

<p>void setup() {</p>
<p>Serial.begin(115200);</p>

<p>pinMode(PIN_LED, OUTPUT);</p>
<p>pinMode(PIN_BOTON, INPUT_PULLUP);</p>

<p>ledcSetup(PWM_CH, 5000, 8);</p>
<p>ledcAttachPin(PIN_LED, PWM_CH);</p>

<p>Serial.println("Sistema de iluminaci√≥n dual");</p>
<p>Serial.println("Bot√≥n presionado = MODO MANUAL");</p>
<p>Serial.println("Bot√≥n suelto = MODO AUTOM√ÅTICO");</p>
<p>}</p>

<p>void loop() {</p>
<p>// Leer modo</p>
<p>modoManual = (digitalRead(PIN_BOTON) == LOW);  // LOW = presionado</p>

<p>if (modoManual) {</p>
<p>// MODO MANUAL: potenci√≥metro controla brillo</p>
<p>int pot = analogRead(PIN_POT);</p>
<p>int brillo = map(pot, 0, 4095, 0, 255);</p>
<p>ledcWrite(PWM_CH, brillo);</p>

<p>Serial.print("[MANUAL] Pot: ");</p>
<p>Serial.print(pot);</p>
<p>Serial.print(" ‚Üí Brillo: ");</p>
<p>Serial.println(brillo);</p>
<p>}</p>
<p>else {</p>
<p>// MODO AUTOM√ÅTICO: LDR controla LED</p>
<p>int ldr = analogRead(PIN_LDR);</p>

<p>if (ldr < UMBRAL_OSCURO) {</p>
<p>ledcWrite(PWM_CH, 255);  // M√°ximo brillo</p>
<p>Serial.println("[AUTO] Oscuro ‚Üí LED al 100%");</p>
<p>}</p>
<p>else if (ldr > UMBRAL_CLARO) {</p>
<p>ledcWrite(PWM_CH, 0);    // Apagado</p>
<p>Serial.println("[AUTO] Claro ‚Üí LED OFF");</p>
<p>}</p>
<p>else {</p>
<p>// Rango intermedio: brillo proporcional</p>
<p>int brillo = map(ldr, UMBRAL_OSCURO, UMBRAL_CLARO, 255, 0);</p>
<p>ledcWrite(PWM_CH, brillo);</p>
<p>Serial.print("[AUTO] Medio ‚Üí Brillo: ");</p>
<p>Serial.println(brillo);</p>
<p>}</p>
<p>}</p>

<p>delay(500);</p>
<p>}</p>
</code></pre>

<p>---</p>

</section>
<section id="üìù-ejercicios-de-entrega">
<h2>üìù Ejercicios de Entrega</h2>

<h3>Ejercicio 1: Sistema de Ahorro de Energ√≠a (50%)</h3>

<p>Crear un sistema que:</p>
<ul>
<li> Con un <strong>potenci√≥metro</strong> se ajusta el umbral de luz deseado (0-100%)</li>
<li> Con el <strong>LDR</strong> lee la luz ambiental actual</li>
<li> <strong>Si la luz ambiental < umbral</strong>, enciende LED</li>
<li> Mostrar en Serial: "Luz actual: XX% | Umbral: YY% | LED: ON/OFF"</li>
</ul>

<p><strong>Requisitos:</strong></p>
<ul>
<li>Usar <code>map()</code> para convertir todo a porcentajes</li>
<li>Implementar hist√©resis para evitar flicker</li>
<li>El umbral debe ajustarse en tiempo real</li>
</ul>

<h3>Ejercicio 2: Medidor de Intensidad Lum√≠nica (50%)</h3>

<p>Crear un sistema que:</p>
<ul>
<li> Mida la intensidad de luz en <strong>5 niveles</strong> (Muy oscuro, Oscuro, Medio, Claro, Muy claro)</li>
<li> Muestre el nivel con <strong>5 LEDs</strong> (o PWM en un LED con 5 niveles de brillo)</li>
<li> Un bot√≥n alterna entre mostrar el nivel num√©rico (1-5) o el valor RAW del LDR</li>
</ul>

<p><strong>Niveles sugeridos:</strong></p>
<ul>
<li>0-800: Muy oscuro (1 LED / 20% brillo)</li>
<li>801-1600: Oscuro (2 LEDs / 40% brillo)</li>
<li>1601-2400: Medio (3 LEDs / 60% brillo)</li>
<li>2401-3200: Claro (4 LEDs / 80% brillo)</li>
<li>3201-4095: Muy claro (5 LEDs / 100% brillo)</li>
</ul>

<p>---</p>

</section>
<section id="‚úÖ-r√∫brica-de-evaluaci√≥n">
<h2>‚úÖ R√∫brica de Evaluaci√≥n</h2>

<p><table></p>
<p><thead><tr></p>
<p><th>Criterio</th></p>
<p><th>Puntos</th></p>
<p><th>Descripci√≥n</th></p>
</tr></thead><tbody>
<p><tr></p>
<p><td><strong>Conexi√≥n LDR</strong></td></p>
<p><td>15</td></p>
<p><td>Divisor de voltaje correcto</td></p>
</tr>
<p><tr></p>
<p><td><strong>Lectura ADC</strong></td></p>
<p><td>20</td></p>
<p><td>Valores correctos (0-4095)</td></p>
</tr>
<p><tr></p>
<p><td><strong>Control autom√°tico</strong></td></p>
<p><td>25</td></p>
<p><td>LED responde a luz correctamente</td></p>
</tr>
<p><tr></p>
<p><td><strong>Uso de map()</strong></td></p>
<p><td>15</td></p>
<p><td>Mapeo correcto de valores</td></p>
</tr>
<p><tr></p>
<p><td><strong>Ejercicio 1</strong></td></p>
<p><td>15</td></p>
<p><td>Sistema de ahorro funciona</td></p>
</tr>
<p><tr></p>
<p><td><strong>Ejercicio 2</strong></td></p>
<p><td>10</td></p>
<p><td>Medidor de 5 niveles</td></p>
</tr>
</tbody></table>

<p>---</p>

</section>
<section id="üîç-soluci√≥n-de-problemas">
<h2>üîç Soluci√≥n de Problemas</h2>

<p><table></p>
<p><thead><tr></p>
<p><th>Problema</th></p>
<p><th>Causa</th></p>
<p><th>Soluci√≥n</th></p>
</tr></thead><tbody>
<p><tr></p>
<p><td>Lectura siempre 4095</td></p>
<p><td>Pin incorrecto</td></p>
<p><td>Usar solo GPIO34, 35, 32, 33</td></p>
</tr>
<p><tr></p>
<p><td>Lectura siempre 0</td></p>
<p><td>LDR invertida o mala conexi√≥n</td></p>
<p><td>Verificar divisor de voltaje</td></p>
</tr>
<p><tr></p>
<p><td>LED no responde</td></p>
<p><td>Pin equivocado</td></p>
<p><td>Revisar que sea PWM compatible (2, 4, 5...)</td></p>
</tr>
<p><tr></p>
<p><td>Valores err√°ticos</td></p>
<p><td>Ruido el√©ctrico</td></p>
<p><td>Agregar capacitor 100nF en paralelo a LDR</td></p>
</tr>
<p><tr></p>
<p><td>Sin cambios de luz</td></p>
<p><td>LDR tapada o en sombra</td></p>
<p><td>Exponer LDR directamente a la luz</td></p>
</tr>
</tbody></table>

<p>---</p>

</section>
<section id="üìö-calibraci√≥n-del-sensor">
<h2>üìö Calibraci√≥n del Sensor</h2>

<p>Cada LDR es diferente. Para calibrar:</p>

<pre><code>/<em>
 </em> C√≥digo de calibraci√≥n - Ejecutar una vez
<p><em> Abrir Serial y anotar valores m√≠nimos y m√°ximos</p>
 </em>/

<p>const int PIN_LDR = 34;</p>
<p>int valorMinimo = 4095;</p>
<p>int valorMaximo = 0;</p>

<p>void setup() {</p>
<p>Serial.begin(115200);</p>
<p>Serial.println("Calibraci√≥n de LDR");</p>
<p>Serial.println("Cubra el sensor con la mano...");</p>
<p>delay(3000);</p>
<p>Serial.println("Ahora destape y exponga a luz m√°xima...");</p>
<p>}</p>

<p>void loop() {</p>
<p>int valor = analogRead(PIN_LDR);</p>

<p>if (valor < valorMinimo) valorMinimo = valor;</p>
<p>if (valor > valorMaximo) valorMaximo = valor;</p>

<p>Serial.print("Actual: ");</p>
<p>Serial.print(valor);</p>
<p>Serial.print(" | Min: ");</p>
<p>Serial.print(valorMinimo);</p>
<p>Serial.print(" | Max: ");</p>
<p>Serial.println(valorMaximo);</p>

<p>delay(100);</p>
<p>}</p>
</code></pre>

<p><strong>Usar estos valores para ajustar los umbrales en su c√≥digo.</strong></p>

<p>---</p>

</section>
<section id="üéØ-relaci√≥n-con-el-proyecto-final">
<h2>üéØ Relaci√≥n con el Proyecto Final</h2>

<p>Este laboratorio prepara para el <strong>Proyecto Integrador</strong>:</p>

<ul>
<li>‚úÖ <strong>Sensores anal√≥gicos</strong> ‚Üí Lectura de temperatura, humedad, gas, etc.</li>
<li>‚úÖ <strong>Divisor de voltaje</strong> ‚Üí Patr√≥n usado por muchos sensores</li>
<li>‚úÖ <strong>Control autom√°tico</strong> ‚Üí Base para automatizaci√≥n del hogar</li>
<li>‚úÖ <strong>Mapeo de valores</strong> ‚Üí Normalizaci√≥n de datos para enviar a la nube</li>
</ul>

<p><strong>Para el proyecto final:</strong></p>
<ul>
<li>Podr√°n leer m√∫ltiples sensores (temperatura, luz, humedad)</li>
<li>Implementar l√≥gica de control automatizada</li>
<li>Preparar datos para enviar a WiFi (Lab 5)</li>
</ul>

<p>---</p>

</section>
<section id="üéØ-preparaci√≥n-para-lab-4">
<h2>üéØ Preparaci√≥n para Lab 4</h2>

<p>El <strong>Laboratorio 4</strong> trabajar√° con:</p>
<ul>
<li><strong>Sensor DHT11/DHT22</strong> (temperatura y humedad)</li>
<li>Instalaci√≥n de librer√≠as</li>
<li>Formato JSON para IoT</li>
<li>Preparaci√≥n para env√≠o de datos a la nube</li>
</ul>

<p><strong>Revisar antes de clase:</strong></p>
<ul>
<li>C√≥mo instalar librer√≠as en Arduino IDE</li>
<li>Formato JSON b√°sico</li>
<li>Concepto de datos estructurados</li>
</ul>

<p>---</p>

</section>
<section id="üõí-lista-de-compras-(medell√≠n)">
<h2>üõí Lista de Compras (Medell√≠n)</h2>

<p><strong>Tiendas sugeridas:</strong></p>
<ul>
<li><strong>San Alejo</strong> (Centro): Amplia variedad de componentes</li>
<li><strong>El Hueco</strong> (Centro): Precios m√°s econ√≥micos</li>
<li><strong>Tiendas de electr√≥nica</strong> en Laureles/Bello: M√°s cercanas</li>
</ul>

<p><strong>Para este laboratorio:</strong></p>
<ul>
<li>1x LDR 5mm: $1.500</li>
<li>1x Potenci√≥metro 10K: $2.000</li>
<li>1x Resistencia 10K: $100</li>
<li>1x Protoboard (si no tiene): $7.000</li>
</ul>

<p><strong>Total:</strong> ~$10.500 (sin contar ESP32 que ya deber√≠a tener)</p>

<p>---</p>

<p><strong>UNAULA - Ingenier√≠a Inform√°tica - Complementaria II (IoT)</strong></p>
</section>

        </main>

        <footer>
            <p><strong>IF0112 - Complementaria II (IoT)</strong></p>
            <p>Universidad Aut√≥noma Latinoamericana (UNAULA) - Ingenier√≠a Inform√°tica - 2026-I</p>
            <p style="margin-top: 1rem; font-size: 0.85rem; opacity: 0.8;">Laboratorio HTML | √öltima actualizaci√≥n: 2026-02-02</p>
        </footer>
    </div>

    <script>
        (function() {
            'use strict';
            const progressFill = document.getElementById('progressFill');
            const backToTop = document.getElementById('backToTop');

            if (!progressFill || !backToTop) return;

            function updateProgress() {
                const windowHeight = window.innerHeight;
                const documentHeight = document.documentElement.scrollHeight - windowHeight;
                const scrolled = window.scrollY;
                const progress = (scrolled / documentHeight) * 100;
                progressFill.style.width = Math.min(progress, 100) + '%';

                if (scrolled > windowHeight * 0.5) {
                    backToTop.classList.add('visible');
                } else {
                    backToTop.classList.remove('visible');
                }
            }

            function scrollToTop() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            let ticking = false;
            function onScroll() {
                if (!ticking) {
                    window.requestAnimationFrame(function() {
                        updateProgress();
                        ticking = false;
                    });
                    ticking = true;
                }
            }

            window.addEventListener('scroll', onScroll, { passive: true });
            backToTop.addEventListener('click', scrollToTop);
            updateProgress();
        })();
    </script>
</body>
</html>
